const App = getApp(); const wxParse = require("../../../wxParse/wxParse.js"); Page({ data: { detail: {}, }, onLoad(options) { this.getArticleDetail(options.article_id) }, getArticleDetail(article_id) { let _this = this; App._get('article/detail', { article_id }, function (result) { let detail = result.data.detail; if (detail.article_content.length > 0) { wxParse.wxParse('content', 'html', detail.article_content, _this, 0) } _this.setData({ detail }) }) }, onShareAppMessage() { let params = App.getShareUrlParams({ 'article_id': this.data.detail.article_id }); return { title: this.data.detail.article_title, path: "/pages/article/detail/index?" + params } }, })