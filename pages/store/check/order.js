const App = getApp(); const DeliveryTypeEnum = require('../../../utils/enum/DeliveryType.js'); Page({ data: { options: {}, deliverys: DeliveryTypeEnum, }, onLoad(options) { let _this = this, scene = App.getSceneData(options); _this.setData({ options: scene }); _this.getOrderDetail() }, getOrderDetail() { let _this = this; App._get('shop.order/detail', { order_id: _this.data.options.oid, order_type: _this.data.options.oty }, result => { _this.setData(result.data) }) }, onTargetGoods(e) { let goods_id = e.currentTarget.dataset.id; wx.navigateTo({ url: '../../goods/index?goods_id=' + goods_id }) }, onTargetShop(e) { wx.navigateTo({ url: '../../shop/detail/index?shop_id=' + e.currentTarget.dataset.id, }) }, onSubmitExtract() { let _this = this; wx.showModal({ title: "提示", content: "确认核销该订单吗？", success(o) { if (o.confirm) { App._post_form('shop.order/extract', { order_id: _this.data.options.oid, order_type: _this.data.options.oty }, result => { App.showSuccess(result.msg, () => { _this.getOrderDetail() }) }) } } }) }, })