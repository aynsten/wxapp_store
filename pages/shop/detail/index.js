const App = getApp(); Page({ data: { detail: {}, }, onLoad(options) { let _this = this; _this.getShopDetail(options.shop_id) }, getShopDetail(shop_id) { let _this = this; App._get('shop/detail', { shop_id }, function (result) { _this.setData(result.data) }) }, onShareAppMessage() { let _this = this; let params = App.getShareUrlParams({ 'shop_id': _this.data.detail.shop_id }); return { title: _this.data.detail.article_title, path: "/pages/shop/detail/index?" + params } }, onMakePhoneCall() { let _this = this; wx.makePhoneCall({ phoneNumber: _this.data.detail.phone }) }, onOpenLocation() { let _this = this, detail = _this.data.detail; wx.openLocation({ name: detail.shop_name, address: detail.region.province + detail.region.city + detail.region.region + detail.address, longitude: Number(detail.longitude), latitude: Number(detail.latitude), scale: 15 }) }, })