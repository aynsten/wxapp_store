const App = getApp(); import util from '../../../utils/util.js'; import CountDown from '../../../utils/countdown.js'; import ActiveStatusEnum from '../../../utils/enum/sharp/GoodsStatus.js'; Component({ options: { addGlobalClass: true, }, properties: { itemIndex: String, itemStyle: Object, params: Object, data: Object, }, data: { ActiveStatusEnum, countDownList: [], }, lifetimes: { attached() { let _this = this; _this._initCountDownData() }, }, methods: { _onTargetGoods(e) { App.saveFormId(e.detail.formId); let _this = this, query = util.urlEncode({ active_time_id: _this.data.data.active.active_time_id, sharp_goods_id: e.detail.target.dataset.id, }); wx.navigateTo({ url: `/pages/sharp/goods/index?${query}`, }) }, _onTargetSharpIndex(e) { App.saveFormId(e.detail.formId); wx.navigateTo({ url: `/pages/sharp/index/index`, }) }, _initCountDownData(data) { let _this = this, active = _this.data.data.active; if (!active) { return false } _this.setData({ [`countDownList[0]`]: { date: active.count_down_time, } }); CountDown.onSetTimeList(_this, 'countDownList') }, } })